"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.edit = exports.remove = exports.list = exports.add = void 0;
const flag_1 = require("../flag");
const database_1 = __importDefault(require("../config/database"));
async function add(flags) {
    const name = await flag_1.Require.text({
        value: flags.name,
        prompt: "Name of the pot?",
    });
    database_1.default.Pot.create({ name });
    return name;
}
exports.add = add;
function list() {
    const pots = database_1.default.Pot.findAll().map(pot => pot.name);
    database_1.default.close();
    return pots;
}
exports.list = list;
async function remove(flags) {
    const pot = await flag_1.Require.pot({
        value: flags.name,
    });
    const { name } = pot;
    database_1.default.Pot.remove(pot);
    return name;
}
exports.remove = remove;
async function edit(flags) {
    const pot = await flag_1.Require.pot({
        value: flags.name,
    });
    const changedValues = {};
    changedValues.name = await flag_1.Require.text({
        value: flags.newName,
        prompt: "New name of the pot?",
    });
    database_1.default.Pot.edit(pot, changedValues);
    return Object.keys(changedValues);
}
exports.edit = edit;
